import { Button, VerticalBox, Spinner, ProgressIndicator } from "std-widgets.slint";

export component Dashboard inherits Window {
    width: 800px;
    height: 480px;
    full-screen: true;

    // Speedometer gauge with speed text inside
    Rectangle {
        x: parent.width / 2; y: 150px;
        width: 100%; height: 150px;
        background: transparent;

        // Dynamic green arc for speedometer
        // this shit sucks
        // Path {
        //     width: parent.width; height: parent.height;
        //     stroke: #4caf50; stroke-width: 12px;

        //     property <float> angle: (root.speed / 120) * 180;

        //     MoveTo {
        //         x: 0;
        //         y: 150;
        //     }
        //     ArcTo {
        //         x: (150 * cos((180.0 - angle) * 1deg) + 150); y: (-150 * sin((180.0 - angle) * 1deg) + 150);
        //         radius-x: 150; radius-y: 150;
        //         sweep: true;
        //         large-arc: false;
        //     }
        // }


        
        Text {
            text: root.speed + " mph";
            font-size: 48px;
            horizontal-alignment: center;
            vertical-alignment: center;
            width: parent.width;
            height: parent.height;
        }
    }

    
    Text {
        text: root.voltage + " V";
        font-size: 36px;
        x: 20px; y: 100px;
    }

    
    Rectangle {
        width: 50px; height: 50px;
        background: root.leftBlinkerOn ? #ffff00 : #808080;
        x: 20px; y: 200px;
    }
    Rectangle {
        width: 50px; height: 50px;
        background: root.rightBlinkerOn ? #ffff00 : #808080;
        x: 100px; y: 200px;
    }

    
    Rectangle {
        width: 300px; height: 30px;
        x: 20px; y: 280px;
        background: #cccccc;
        Rectangle {
            width: parent.width * (root.throttle / 100);
            height: parent.height;
            background: #4caf50;
        }
        border-radius: 5px;
        border-width: 1px;
        border-color: #888888;
    }
    
    VerticalBox {
        x: 20px; y: 340px;
        spacing: 10px;
        Text { text: "BMS: " + root.tempBMS + " °C"; font-size: 24px; }
        Text { text: "Motor: " + root.tempMotor + " °C"; font-size: 24px; }
        Text { text: "Controller: " + root.tempController + " °C"; font-size: 24px; }
    }

    // Exposed properties
    in property<int> speed;
    in property<float> voltage;
    in property<bool> leftBlinkerOn;
    in property<bool> rightBlinkerOn;
    in property<int> throttle;
    in property<int> tempBMS;
    in property<int> tempMotor;
    in property<int> tempController;
}
